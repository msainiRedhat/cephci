tests:
  - test:
      abort-on-fail: true
      desc: Install network node deployment.
      module: install_network_node.py
      name: setup pre-requisites
      node: node8
      config:
        ansi_config:
          ceph_test: True
          ceph_origin: distro
          ceph_stable_release: pacific
          ceph_repository: rhcs
          osd_scenario: lvm
          osd_auto_discovery: False
          ceph_stable: True
          ceph_stable_rh_storage: True
          ceph_docker_image: rhceph/rhceph-5-rhel8
          ceph_docker_image_tag: latest
          containerized_deployment: true
          ceph_docker_registry: registry.access.redhat.com
          copy_admin_key: true
          dashboard_enabled: False
          custom_image: true
          node_exporter_container_image: registry.redhat.io/openshift4/ose-prometheus-node-exporter:v4.6
          grafana_container_image: registry.redhat.io/rhceph/rhceph-5-dashboard-rhel8:latest
          prometheus_container_image: registry.redhat.io/openshift4/ose-prometheus:v4.6
          alertmanager_container_image: registry.redhat.io/openshift4/ose-prometheus-alertmanager:v4.6
        args:
          mon-ip: node1
  - test:
      name: cephadm-ansible preflight playbook
      desc: execute cephadm-preflight playbook
      node: node8
      module: test_cephadm_ansible.py
      config:
        playbook: cephadm-preflight.yml
        extra-vars:
          ceph_origin: custom
      destroy-cluster: false
      abort-on-fail: true

  - test:
      name: Cluster deployment
      desc: Cluster deployment with latest released version of 5.x
      node: node1
      module: test_disconnected_bootstrap.py
      config:
        ansi_config:
          node_exporter_container_image: registry.redhat.io/openshift4/ose-prometheus-node-exporter:v4.6
          grafana_container_image: registry.redhat.io/rhceph/rhceph-5-dashboard-rhel8:latest
          prometheus_container_image: registry.redhat.io/openshift4/ose-prometheus:v4.6
          alertmanager_container_image: registry.redhat.io/openshift4/ose-prometheus-alertmanager:v4.6
        verbose: true
        args:
          mon-ip: node1
      destroy-cluster: false
      abort-on-fail: true
